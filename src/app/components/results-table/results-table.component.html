<div class="btn-wrapper">
  <button class="btn btn-primary" (click)="activateOrDeactivateComercialRelation()"
    *ngIf="isEnabled; else active">Activar/Desactivar<i class="bi bi-patch-check"></i></button>
  <ng-template #active>
    <button class="btn btn-primary" #active disabled>Activar/Desactivar<i class="bi bi-patch-check"></i></button>
  </ng-template>
  <button class="btn btn-primary" (click)="addComercialRelation()">Agregar<i class="bi bi-plus-circle"></i></button>
  <!-- <button class="btn btn-primary">Configurar<i class="bi bi-arrow-right-circle"></i></button> -->
</div>

<ng-template #noDisponible>
  <div class="card">
    <div class="card-body">
      No existe información para visualizar
    </div>
  </div>
</ng-template>


<div class="card">

  <table mat-table [dataSource]="dataSource" *ngIf="!!companyConfigCollection?.length; else noDisponible" matSort
    matSortActive="configurationDate" matSortDirection="desc" matSortDisableClear class="card-body">

    <ng-container matColumnDef="selectField">
      <th mat-header-cell *matHeaderCellDef>Seleccionar</th>
      <td mat-cell *matCellDef="let row">
        <section class="example-section">
          <mat-checkbox class="example-margin" [value]="row" (change)="handleCheck($event,row)"
            *ngIf="row.isCanActivate === 1; else readOnly;"></mat-checkbox>
          <ng-template #readOnly>
            <mat-checkbox class="example-margin" [value]="row" (change)="handleCheck($event, row)" [disabled]="true">
            </mat-checkbox>
          </ng-template>
        </section>
      </td>
    </ng-container>

    <ng-container matColumnDef="idAlliedCompanyConfig">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Id Registro</th>
      <td mat-cell *matCellDef="let row" class="selectable" (click)="goToConfiguration(row)">
        {{ row.idAlliedCompanyConfig }}
      </td>
    </ng-container>

    <ng-container matColumnDef="allied.idAllied">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Id Aliado</th>
      <td mat-cell *matCellDef="let row" class="selectable" (click)="goToConfiguration(row)"> {{ row.allied.idAllied }}
      </td>
    </ng-container>

    <ng-container matColumnDef="allied.name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Nombre Aliado</th>
      <td mat-cell *matCellDef="let row" class="selectable" (click)="goToConfiguration(row)"> {{ row.allied.name }}</td>
    </ng-container>

    <ng-container matColumnDef="company.companyCode">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Codigo Empresa</th>
      <td mat-cell *matCellDef="let row" class="selectable" (click)="goToConfiguration(row)">
        {{ row.company.companyCode }}</td>
    </ng-container>

    <ng-container matColumnDef="company.companyName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre Empresa</th>
      <td mat-cell *matCellDef="let row" class="selectable" (click)="goToConfiguration(row)">
        {{ row.company.companyName }}</td>
    </ng-container>

    <ng-container matColumnDef="configurationDate">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha de Configuración</th>
      <td mat-cell *matCellDef="let row" class="selectable" (click)="goToConfiguration(row)">
        {{ row.configurationDate | date:'d/MMM/y HH:mm' }}</td>
    </ng-container>

    <ng-container matColumnDef="state.state">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado</th>
      <td mat-cell *matCellDef="let row" class="selectable" (click)="goToConfiguration(row)"> {{ row.state.state }}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

</div>
<mat-paginator [length]="dataSource?.filteredData.length" [pageSize]="5" [pageSizeOptions]="[10, 20, 30, 40,50]"></mat-paginator>
